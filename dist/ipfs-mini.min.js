!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("IPFS",[],e):"object"==typeof exports?exports.IPFS=e():t.IPFS=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,e,n){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e){},function(t,e,n){"use strict";function o(t){if(!(this instanceof o))throw Error('[ipfs-mini] IPFS instance must be instantiated with "new" flag (e.g. var ipfs = new IPFS("http://localhost:8545");).');var e=this;e.setProvider(t||{})}function r(t){for(;;){var e="----IPFSMini"+1e5*Math.random()+"."+1e5*Math.random();if(t.indexOf(e)===-1)return e}}var s=void 0;s="undefined"!=typeof window&&window.XMLHttpRequest?window.XMLHttpRequest:n(0).XMLHttpRequest,t.exports=o,o.prototype.setProvider=function(t){if("object"!=typeof t)throw Error("[ifpsjs] provider must be type Object, got '"+typeof t+"'.");var e=this,n=e.provider=Object.assign({host:"127.0.0.1",port:"5001",protocol:"http",base:"/api/v0"},t||{});e.requestBase=n.protocol+"://"+n.host+":"+n.port+n.base},o.prototype.sendAsync=function(t,e){var n=this,o=new s,r=t||{},i=e||function(){};o.onreadystatechange=function(){if(4===o.readyState&&1!==o.timeout)if(200!==o.status)i(Error("[ipfs-mini] status "+o.status+": "+o.responseText),null);else try{i(null,r.jsonParse?JSON.parse(o.responseText):o.responseText)}catch(t){i(Error("[ipfs-mini] while parsing data: '"+(o.responseText+"")+"', error: "+(t+"")+" with provider: '"+n.requestBase+"'",null))}},r.payload?o.open("POST",""+n.requestBase+t.uri):o.open("GET",""+n.requestBase+t.uri),r.accept&&o.setRequestHeader("accept",r.accept),r.payload&&r.boundary?(o.setRequestHeader("Content-Type","multipart/form-data; boundary="+r.boundary),o.send(r.payload)):o.send()},o.prototype.add=function(t,e){var n="object"==typeof t&&t.isBuffer?t.toString("binary"):t,o=r(n),s="--"+o+'\r\nContent-Disposition: form-data; name="path"\r\nContent-Type: application/octet-stream\r\n\r\n'+n+"\r\n--"+o+"--",i=function(t,n){return e(t,t?null:n.Hash)};this.sendAsync({jsonParse:!0,accept:"application/json",uri:"/add",payload:s,boundary:o},i)},o.prototype.addJSON=function(t,e){var n=this;n.add(JSON.stringify(t),e)},o.prototype.stat=function(t,e){var n=this;n.sendAsync({jsonParse:!0,uri:"/object/stat/"+t},e)},o.prototype.cat=function(t,e){var n=this;n.sendAsync({uri:"/cat/"+t},e)},o.prototype.catJSON=function(t,e){var n=this;n.cat(t,function(t,n){if(t)return e(t,null);try{e(null,JSON.parse(n))}catch(o){e(o,null)}})}}])});